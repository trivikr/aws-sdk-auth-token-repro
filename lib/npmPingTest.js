const { spawn, execSync } = require("child_process");

const packages = [
  "@aws-sdk/client-accessanalyzer@3.204.0",
  "@aws-sdk/client-account@3.204.0",
  "@aws-sdk/client-acm@3.204.0",
  "@aws-sdk/client-acm-pca@3.204.0",
  "@aws-sdk/client-alexa-for-business@3.204.0",
  "@aws-sdk/client-amp@3.204.0",
  "@aws-sdk/client-amplify@3.204.0",
  "@aws-sdk/client-amplifybackend@3.204.0",
  "@aws-sdk/client-amplifyuibuilder@3.204.0",
  "@aws-sdk/client-api-gateway@3.204.0",
  "@aws-sdk/client-apigatewaymanagementapi@3.204.0",
  "@aws-sdk/client-apigatewayv2@3.204.0",
  "@aws-sdk/client-appconfig@3.204.0",
  "@aws-sdk/client-appconfigdata@3.204.0",
  "@aws-sdk/client-appflow@3.204.0",
  "@aws-sdk/client-appintegrations@3.204.0",
  "@aws-sdk/client-application-auto-scaling@3.204.0",
  "@aws-sdk/client-applicationcostprofiler@3.204.0",
  "@aws-sdk/client-application-discovery-service@3.204.0",
  "@aws-sdk/client-application-insights@3.204.0",
  "@aws-sdk/client-app-mesh@3.204.0",
  "@aws-sdk/client-apprunner@3.204.0",
  "@aws-sdk/client-appstream@3.204.0",
  "@aws-sdk/client-appsync@3.204.0",
  "@aws-sdk/client-athena@3.205.0",
  "@aws-sdk/client-auditmanager@3.204.0",
  "@aws-sdk/client-auto-scaling@3.205.0",
  "@aws-sdk/client-auto-scaling-plans@3.204.0",
  "@aws-sdk/client-backup@3.204.0",
  "@aws-sdk/client-backup-gateway@3.204.0",
  "@aws-sdk/client-backupstorage@3.204.0",
  "@aws-sdk/client-batch@3.204.0",
  "@aws-sdk/client-billingconductor@3.204.0",
  "@aws-sdk/client-braket@3.204.0",
  "@aws-sdk/client-budgets@3.204.0",
  "@aws-sdk/client-chime@3.204.0",
  "@aws-sdk/client-chime-sdk-identity@3.204.0",
  "@aws-sdk/client-chime-sdk-media-pipelines@3.204.0",
  "@aws-sdk/client-chime-sdk-meetings@3.204.0",
  "@aws-sdk/client-chime-sdk-messaging@3.204.0",
  "@aws-sdk/client-cloud9@3.204.0",
  "@aws-sdk/client-cloudcontrol@3.204.0",
  "@aws-sdk/client-clouddirectory@3.204.0",
  "@aws-sdk/client-cloudformation@3.204.0",
  "@aws-sdk/client-cloudfront@3.204.0",
  "@aws-sdk/client-cloudhsm@3.204.0",
  "@aws-sdk/client-cloudhsm-v2@3.204.0",
  "@aws-sdk/client-cloudsearch@3.204.0",
  "@aws-sdk/client-cloudsearch-domain@3.204.0",
  "@aws-sdk/client-cloudtrail@3.205.0",
  "@aws-sdk/client-cloudwatch@3.204.0",
  "@aws-sdk/client-cloudwatch-events@3.204.0",
  "@aws-sdk/client-cloudwatch-logs@3.204.0",
  "@aws-sdk/client-codeartifact@3.204.0",
  "@aws-sdk/client-codebuild@3.204.0",
  "@aws-sdk/client-codecommit@3.204.0",
  "@aws-sdk/client-codedeploy@3.204.0",
  "@aws-sdk/client-codeguruprofiler@3.204.0",
  "@aws-sdk/client-codeguru-reviewer@3.204.0",
  "@aws-sdk/client-codepipeline@3.204.0",
  "@aws-sdk/client-codestar@3.204.0",
  "@aws-sdk/client-codestar-connections@3.204.0",
  "@aws-sdk/client-codestar-notifications@3.204.0",
  "@aws-sdk/client-cognito-identity@3.204.0",
  "@aws-sdk/client-cognito-identity-provider@3.204.0",
  "@aws-sdk/client-cognito-sync@3.204.0",
  "@aws-sdk/client-comprehend@3.204.0",
  "@aws-sdk/client-comprehendmedical@3.204.0",
  "@aws-sdk/client-compute-optimizer@3.204.0",
  "@aws-sdk/client-config-service@3.204.0",
  "@aws-sdk/client-connect@3.204.0",
  "@aws-sdk/client-connectcampaigns@3.204.0",
  "@aws-sdk/client-connectcases@3.204.0",
  "@aws-sdk/client-connect-contact-lens@3.204.0",
  "@aws-sdk/client-connectparticipant@3.204.0",
  "@aws-sdk/client-controltower@3.204.0",
  "@aws-sdk/client-cost-and-usage-report-service@3.204.0",
  "@aws-sdk/client-cost-explorer@3.204.0",
  "@aws-sdk/client-customer-profiles@3.204.0",
  "@aws-sdk/client-database-migration-service@3.204.0",
  "@aws-sdk/client-databrew@3.204.0",
  "@aws-sdk/client-dataexchange@3.204.0",
  "@aws-sdk/client-data-pipeline@3.204.0",
  "@aws-sdk/client-datasync@3.204.0",
  "@aws-sdk/client-dax@3.204.0",
  "@aws-sdk/client-detective@3.204.0",
  "@aws-sdk/client-device-farm@3.204.0",
  "@aws-sdk/client-devops-guru@3.204.0",
  "@aws-sdk/client-direct-connect@3.204.0",
  "@aws-sdk/client-directory-service@3.204.0",
  "@aws-sdk/client-dlm@3.204.0",
  "@aws-sdk/client-docdb@3.204.0",
  "@aws-sdk/client-drs@3.204.0",
  "@aws-sdk/client-dynamodb@3.204.0",
  "@aws-sdk/client-dynamodb-streams@3.204.0",
  "@aws-sdk/client-ebs@3.204.0",
  "@aws-sdk/client-ec2@3.205.0",
  "@aws-sdk/client-ec2-instance-connect@3.204.0",
  "@aws-sdk/client-ecr@3.204.0",
  "@aws-sdk/client-ecr-public@3.204.0",
  "@aws-sdk/client-ecs@3.204.0",
  "@aws-sdk/client-efs@3.204.0",
  "@aws-sdk/client-eks@3.204.0",
  "@aws-sdk/client-elasticache@3.205.0",
  "@aws-sdk/client-elastic-beanstalk@3.204.0",
  "@aws-sdk/client-elastic-inference@3.204.0",
  "@aws-sdk/client-elastic-load-balancing@3.204.0",
  "@aws-sdk/client-elastic-load-balancing-v2@3.204.0",
  "@aws-sdk/client-elasticsearch-service@3.204.0",
  "@aws-sdk/client-elastic-transcoder@3.204.0",
  "@aws-sdk/client-emr@3.204.0",
  "@aws-sdk/client-emr-containers@3.204.0",
  "@aws-sdk/client-emr-serverless@3.204.0",
  "@aws-sdk/client-eventbridge@3.204.0",
  "@aws-sdk/client-evidently@3.204.0",
  "@aws-sdk/client-finspace@3.204.0",
  "@aws-sdk/client-finspace-data@3.204.0",
  "@aws-sdk/client-firehose@3.204.0",
  "@aws-sdk/client-fis@3.204.0",
  "@aws-sdk/client-fms@3.204.0",
  "@aws-sdk/client-forecast@3.204.0",
  "@aws-sdk/client-forecastquery@3.204.0",
  "@aws-sdk/client-frauddetector@3.204.0",
  "@aws-sdk/client-fsx@3.204.0",
  "@aws-sdk/client-gamelift@3.204.0",
  "@aws-sdk/client-gamesparks@3.204.0",
  "@aws-sdk/client-glacier@3.204.0",
  "@aws-sdk/client-global-accelerator@3.204.0",
  "@aws-sdk/client-glue@3.204.0",
  "@aws-sdk/client-grafana@3.204.0",
  "@aws-sdk/client-greengrass@3.204.0",
  "@aws-sdk/client-greengrassv2@3.204.0",
  "@aws-sdk/client-groundstation@3.204.0",
  "@aws-sdk/client-guardduty@3.204.0",
  "@aws-sdk/client-health@3.204.0",
  "@aws-sdk/client-healthlake@3.204.0",
  "@aws-sdk/client-honeycode@3.204.0",
  "@aws-sdk/client-iam@3.204.0",
  "@aws-sdk/client-identitystore@3.204.0",
  "@aws-sdk/client-imagebuilder@3.204.0",
  "@aws-sdk/client-inspector@3.204.0",
  "@aws-sdk/client-inspector2@3.204.0",
  "@aws-sdk/client-iot@3.204.0",
  "@aws-sdk/client-iot-1click-devices-service@3.204.0",
  "@aws-sdk/client-iot-1click-projects@3.204.0",
  "@aws-sdk/client-iotanalytics@3.204.0",
  "@aws-sdk/client-iot-data-plane@3.204.0",
  "@aws-sdk/client-iotdeviceadvisor@3.204.0",
  "@aws-sdk/client-iot-events@3.204.0",
  "@aws-sdk/client-iot-events-data@3.204.0",
  "@aws-sdk/client-iotfleethub@3.204.0",
  "@aws-sdk/client-iotfleetwise@3.204.0",
  "@aws-sdk/client-iot-jobs-data-plane@3.204.0",
  "@aws-sdk/client-iotsecuretunneling@3.204.0",
  "@aws-sdk/client-iotsitewise@3.204.0",
  "@aws-sdk/client-iotthingsgraph@3.204.0",
  "@aws-sdk/client-iottwinmaker@3.204.0",
  "@aws-sdk/client-iot-wireless@3.204.0",
  "@aws-sdk/client-ivs@3.204.0",
  "@aws-sdk/client-ivschat@3.204.0",
  "@aws-sdk/client-kafka@3.204.0",
  "@aws-sdk/client-kafkaconnect@3.204.0",
  "@aws-sdk/client-kendra@3.204.0",
  "@aws-sdk/client-keyspaces@3.204.0",
  "@aws-sdk/client-kinesis@3.204.0",
  "@aws-sdk/client-kinesis-analytics@3.204.0",
  "@aws-sdk/client-kinesis-analytics-v2@3.204.0",
  "@aws-sdk/client-kinesis-video@3.204.0",
  "@aws-sdk/client-kinesis-video-archived-media@3.204.0",
  "@aws-sdk/client-kinesis-video-media@3.204.0",
  "@aws-sdk/client-kinesis-video-signaling@3.204.0",
  "@aws-sdk/client-kms@3.204.0",
  "@aws-sdk/client-lakeformation@3.204.0",
  "@aws-sdk/client-lambda@3.204.0",
  "@aws-sdk/client-lex-model-building-service@3.204.0",
  "@aws-sdk/client-lex-models-v2@3.205.0",
  "@aws-sdk/client-lex-runtime-service@3.204.0",
  "@aws-sdk/client-lex-runtime-v2@3.204.0",
  "@aws-sdk/client-license-manager@3.204.0",
  "@aws-sdk/client-license-manager-user-subscriptions@3.204.0",
  "@aws-sdk/client-lightsail@3.204.0",
  "@aws-sdk/client-location@3.204.0",
  "@aws-sdk/client-lookoutequipment@3.204.0",
  "@aws-sdk/client-lookoutmetrics@3.204.0",
  "@aws-sdk/client-lookoutvision@3.204.0",
  "@aws-sdk/client-m2@3.204.0",
  "@aws-sdk/client-machine-learning@3.204.0",
  "@aws-sdk/client-macie@3.204.0",
  "@aws-sdk/client-macie2@3.204.0",
  "@aws-sdk/client-managedblockchain@3.204.0",
  "@aws-sdk/client-marketplace-catalog@3.204.0",
  "@aws-sdk/client-marketplace-commerce-analytics@3.204.0",
  "@aws-sdk/client-marketplace-entitlement-service@3.204.0",
  "@aws-sdk/client-marketplace-metering@3.204.0",
  "@aws-sdk/client-mediaconnect@3.204.0",
  "@aws-sdk/client-mediaconvert@3.205.0",
  "@aws-sdk/client-medialive@3.204.0",
  "@aws-sdk/client-mediapackage@3.204.0",
  "@aws-sdk/client-mediapackage-vod@3.204.0",
  "@aws-sdk/client-mediastore@3.204.0",
  "@aws-sdk/client-mediastore-data@3.204.0",
  "@aws-sdk/client-mediatailor@3.204.0",
  "@aws-sdk/client-memorydb@3.204.0",
  "@aws-sdk/client-mgn@3.204.0",
  "@aws-sdk/client-migration-hub@3.204.0",
  "@aws-sdk/client-migrationhub-config@3.204.0",
  "@aws-sdk/client-migrationhuborchestrator@3.204.0",
  "@aws-sdk/client-migration-hub-refactor-spaces@3.204.0",
  "@aws-sdk/client-migrationhubstrategy@3.204.0",
  "@aws-sdk/client-mobile@3.204.0",
  "@aws-sdk/client-mq@3.204.0",
  "@aws-sdk/client-mturk@3.204.0",
  "@aws-sdk/client-mwaa@3.204.0",
  "@aws-sdk/client-neptune@3.204.0",
  "@aws-sdk/client-network-firewall@3.204.0",
  "@aws-sdk/client-networkmanager@3.204.0",
  "@aws-sdk/client-nimble@3.204.0",
  "@aws-sdk/client-opensearch@3.204.0",
  "@aws-sdk/client-opsworks@3.204.0",
  "@aws-sdk/client-opsworkscm@3.204.0",
  "@aws-sdk/client-organizations@3.204.0",
  "@aws-sdk/client-outposts@3.204.0",
  "@aws-sdk/client-panorama@3.204.0",
  "@aws-sdk/client-personalize@3.204.0",
  "@aws-sdk/client-personalize-events@3.204.0",
  "@aws-sdk/client-personalize-runtime@3.204.0",
  "@aws-sdk/client-pi@3.204.0",
  "@aws-sdk/client-pinpoint@3.204.0",
  "@aws-sdk/client-pinpoint-email@3.204.0",
  "@aws-sdk/client-pinpoint-sms-voice@3.204.0",
  "@aws-sdk/client-pinpoint-sms-voice-v2@3.204.0",
  "@aws-sdk/client-polly@3.204.0",
  "@aws-sdk/client-pricing@3.204.0",
  "@aws-sdk/client-privatenetworks@3.204.0",
  "@aws-sdk/client-proton@3.204.0",
  "@aws-sdk/client-qldb@3.204.0",
  "@aws-sdk/client-qldb-session@3.204.0",
  "@aws-sdk/client-quicksight@3.204.0",
  "@aws-sdk/client-ram@3.204.0",
  "@aws-sdk/client-rbin@3.204.0",
  "@aws-sdk/client-rds@3.204.0",
  "@aws-sdk/client-rds-data@3.204.0",
  "@aws-sdk/client-redshift@3.204.0",
  "@aws-sdk/client-redshift-data@3.204.0",
  "@aws-sdk/client-redshift-serverless@3.204.0",
  "@aws-sdk/client-rekognition@3.204.0",
  "@aws-sdk/client-resiliencehub@3.204.0",
  "@aws-sdk/client-resource-groups@3.204.0",
  "@aws-sdk/client-resource-groups-tagging-api@3.204.0",
  "@aws-sdk/client-robomaker@3.204.0",
  "@aws-sdk/client-rolesanywhere@3.204.0",
  "@aws-sdk/client-route-53@3.204.0",
  "@aws-sdk/client-route-53-domains@3.204.0",
  "@aws-sdk/client-route53-recovery-cluster@3.204.0",
  "@aws-sdk/client-route53-recovery-control-config@3.204.0",
  "@aws-sdk/client-route53-recovery-readiness@3.204.0",
  "@aws-sdk/client-route53resolver@3.204.0",
  "@aws-sdk/client-rum@3.204.0",
  "@aws-sdk/client-s3@3.204.0",
  "@aws-sdk/client-s3-control@3.204.0",
  "@aws-sdk/client-s3outposts@3.204.0",
  "@aws-sdk/client-sagemaker@3.204.0",
  "@aws-sdk/client-sagemaker-a2i-runtime@3.204.0",
  "@aws-sdk/client-sagemaker-edge@3.204.0",
  "@aws-sdk/client-sagemaker-featurestore-runtime@3.204.0",
  "@aws-sdk/client-sagemaker-runtime@3.204.0",
  "@aws-sdk/client-savingsplans@3.204.0",
  "@aws-sdk/client-schemas@3.204.0",
  "@aws-sdk/client-secrets-manager@3.204.0",
  "@aws-sdk/client-securityhub@3.204.0",
  "@aws-sdk/client-serverlessapplicationrepository@3.204.0",
  "@aws-sdk/client-service-catalog@3.204.0",
  "@aws-sdk/client-service-catalog-appregistry@3.204.0",
  "@aws-sdk/client-servicediscovery@3.204.0",
  "@aws-sdk/client-service-quotas@3.204.0",
  "@aws-sdk/client-ses@3.204.0",
  "@aws-sdk/client-sesv2@3.204.0",
  "@aws-sdk/client-sfn@3.204.0",
  "@aws-sdk/client-shield@3.204.0",
  "@aws-sdk/client-signer@3.204.0",
  "@aws-sdk/client-sms@3.204.0",
  "@aws-sdk/client-snowball@3.204.0",
  "@aws-sdk/client-snow-device-management@3.204.0",
  "@aws-sdk/client-sns@3.204.0",
  "@aws-sdk/client-sqs@3.204.0",
  "@aws-sdk/client-ssm@3.205.0",
  "@aws-sdk/client-ssm-contacts@3.204.0",
  "@aws-sdk/client-ssm-incidents@3.204.0",
  "@aws-sdk/client-sso@3.204.0",
  "@aws-sdk/client-sso-admin@3.204.0",
  "@aws-sdk/client-sso-oidc@3.204.0",
  "@aws-sdk/client-storage-gateway@3.204.0",
  "@aws-sdk/client-sts@3.204.0",
  "@aws-sdk/client-support@3.204.0",
  "@aws-sdk/client-support-app@3.204.0",
  "@aws-sdk/client-swf@3.204.0",
  "@aws-sdk/client-synthetics@3.204.0",
  "@aws-sdk/client-textract@3.204.0",
  "@aws-sdk/client-timestream-query@3.204.0",
  "@aws-sdk/client-timestream-write@3.204.0",
  "@aws-sdk/client-transcribe@3.204.0",
  "@aws-sdk/client-transcribe-streaming@3.204.0",
  "@aws-sdk/client-transfer@3.204.0",
  "@aws-sdk/client-translate@3.204.0",
  "@aws-sdk/client-voice-id@3.204.0",
  "@aws-sdk/client-waf@3.204.0",
  "@aws-sdk/client-waf-regional@3.204.0",
  "@aws-sdk/client-wafv2@3.205.0",
  "@aws-sdk/client-wellarchitected@3.205.0",
  "@aws-sdk/client-wisdom@3.204.0",
  "@aws-sdk/client-workdocs@3.204.0",
  "@aws-sdk/client-worklink@3.204.0",
  "@aws-sdk/client-workmail@3.204.0",
  "@aws-sdk/client-workmailmessageflow@3.204.0",
  "@aws-sdk/client-workspaces@3.205.0",
  "@aws-sdk/client-workspaces-web@3.204.0",
  "@aws-sdk/client-xray@3.204.0",
  "@aws-sdk/abort-controller@3.201.0",
  "@aws-sdk/body-checksum-browser@3.201.0",
  "@aws-sdk/body-checksum-node@3.201.0",
  "@aws-sdk/chunked-blob-reader@3.188.0",
  "@aws-sdk/chunked-blob-reader-native@3.204.0",
  "@aws-sdk/chunked-stream-reader-node@3.201.0",
  "@aws-sdk/cloudfront-signer@3.201.0",
  "@aws-sdk/config-resolver@3.201.0",
  "@aws-sdk/credential-provider-cognito-identity@3.204.0",
  "@aws-sdk/credential-provider-env@3.201.0",
  "@aws-sdk/credential-provider-imds@3.201.0",
  "@aws-sdk/credential-provider-ini@3.204.0",
  "@aws-sdk/credential-provider-node@3.204.0",
  "@aws-sdk/credential-provider-process@3.201.0",
  "@aws-sdk/credential-providers@3.204.0",
  "@aws-sdk/credential-provider-sso@3.204.0",
  "@aws-sdk/credential-provider-web-identity@3.201.0",
  "@aws-sdk/endpoint-cache@3.201.0",
  "@aws-sdk/eventstream-codec@3.201.0",
  "@aws-sdk/eventstream-handler-node@3.201.0",
  "@aws-sdk/eventstream-serde-browser@3.201.0",
  "@aws-sdk/eventstream-serde-config-resolver@3.201.0",
  "@aws-sdk/eventstream-serde-node@3.201.0",
  "@aws-sdk/eventstream-serde-universal@3.201.0",
  "@aws-sdk/fetch-http-handler@3.204.0",
  "@aws-sdk/hash-blob-browser@3.204.0",
  "@aws-sdk/hash-node@3.201.0",
  "@aws-sdk/hash-stream-node@3.201.0",
  "@aws-sdk/invalid-dependency@3.201.0",
  "@aws-sdk/is-array-buffer@3.201.0",
  "@aws-sdk/karma-credential-loader@3.204.0",
  "@aws-sdk/md5-js@3.204.0",
  "@aws-sdk/middleware-apply-body-checksum@3.201.0",
  "@aws-sdk/middleware-bucket-endpoint@3.201.0",
  "@aws-sdk/middleware-content-length@3.201.0",
  "@aws-sdk/middleware-endpoint@3.201.0",
  "@aws-sdk/middleware-endpoint-discovery@3.201.0",
  "@aws-sdk/middleware-eventstream@3.201.0",
  "@aws-sdk/middleware-expect-continue@3.201.0",
  "@aws-sdk/middleware-flexible-checksums@3.201.0",
  "@aws-sdk/middleware-host-header@3.201.0",
  "@aws-sdk/middleware-location-constraint@3.201.0",
  "@aws-sdk/middleware-logger@3.201.0",
  "@aws-sdk/middleware-recursion-detection@3.201.0",
  "@aws-sdk/middleware-retry@3.201.0",
  "@aws-sdk/middleware-sdk-api-gateway@3.201.0",
  "@aws-sdk/middleware-sdk-ec2@3.201.0",
  "@aws-sdk/middleware-sdk-glacier@3.201.0",
  "@aws-sdk/middleware-sdk-machinelearning@3.201.0",
  "@aws-sdk/middleware-sdk-rds@3.201.0",
  "@aws-sdk/middleware-sdk-route53@3.201.0",
  "@aws-sdk/middleware-sdk-s3@3.201.0",
  "@aws-sdk/middleware-sdk-s3-control@3.201.0",
  "@aws-sdk/middleware-sdk-sqs@3.201.0",
  "@aws-sdk/middleware-sdk-sts@3.201.0",
  "@aws-sdk/middleware-sdk-transcribe-streaming@3.201.0",
  "@aws-sdk/middleware-serde@3.201.0",
  "@aws-sdk/middleware-signing@3.201.0",
  "@aws-sdk/middleware-ssec@3.201.0",
  "@aws-sdk/middleware-stack@3.201.0",
  "@aws-sdk/middleware-token@3.201.0",
  "@aws-sdk/middleware-user-agent@3.201.0",
  "@aws-sdk/node-config-provider@3.201.0",
  "@aws-sdk/node-http-handler@3.201.0",
  "@aws-sdk/polly-request-presigner@3.204.0",
  "@aws-sdk/property-provider@3.201.0",
  "@aws-sdk/protocol-http@3.201.0",
  "@aws-sdk/querystring-builder@3.201.0",
  "@aws-sdk/querystring-parser@3.201.0",
  "@aws-sdk/rds-signer@3.204.0",
  "@aws-sdk/s3-presigned-post@3.204.0",
  "@aws-sdk/s3-request-presigner@3.204.0",
  "@aws-sdk/service-client-documentation-generator@3.188.0",
  "@aws-sdk/service-error-classification@3.201.0",
  "@aws-sdk/sha256-tree-hash@3.201.0",
  "@aws-sdk/shared-ini-file-loader@3.201.0",
  "@aws-sdk/signature-v4@3.201.0",
  "@aws-sdk/signature-v4-crt@3.201.0",
  "@aws-sdk/signature-v4-multi-region@3.201.0",
  "@aws-sdk/smithy-client@3.201.0",
  "@aws-sdk/token-providers@3.204.0",
  "@aws-sdk/types@3.201.0",
  "@aws-sdk/url-parser@3.201.0",
  "@aws-sdk/util-arn-parser@3.201.0",
  "@aws-sdk/util-base64@3.202.0",
  "@aws-sdk/util-base64-browser@3.188.0",
  "@aws-sdk/util-base64-node@3.201.0",
  "@aws-sdk/util-body-length-browser@3.188.0",
  "@aws-sdk/util-body-length-node@3.201.0",
  "@aws-sdk/util-buffer-from@3.201.0",
  "@aws-sdk/util-config-provider@3.201.0",
  "@aws-sdk/util-create-request@3.201.0",
  "@aws-sdk/util-defaults-mode-browser@3.201.0",
  "@aws-sdk/util-defaults-mode-node@3.201.0",
  "@aws-sdk/util-dynamodb@3.204.0",
  "@aws-sdk/util-endpoints@3.202.0",
  "@aws-sdk/util-format-url@3.201.0",
  "@aws-sdk/util-hex-encoding@3.201.0",
  "@aws-sdk/util-locate-window@3.201.0",
  "@aws-sdk/util-middleware@3.201.0",
  "@aws-sdk/util-stream-browser@3.204.0",
  "@aws-sdk/util-stream-node@3.201.0",
  "@aws-sdk/util-uri-escape@3.201.0",
  "@aws-sdk/util-user-agent-browser@3.201.0",
  "@aws-sdk/util-user-agent-node@3.201.0",
  "@aws-sdk/util-utf8-browser@3.188.0",
  "@aws-sdk/util-utf8-node@3.201.0",
  "@aws-sdk/util-waiter@3.201.0",
  "@aws-sdk/xhr-http-handler@3.204.0",
  "@aws-sdk/xml-builder@3.201.0",
];

const callNpmViewUsingSpawn = (packageNameWithVersion) =>
  new Promise((resolve, reject) => {
    const cmd = spawn(
      "npm",
      ["view", packageNameWithVersion, "name", "version"],
      {
        timeout: 5e3,
        env: {
          HOME: "/tmp",
          PATH: process.env.PATH,
        },
        encoding: "utf8",
      }
    );

    const stderrChunks = [];
    cmd.stderr.on("data", (chunk) => stderrChunks.push(chunk));

    const stdoutChunks = [];
    cmd.stdout.on("data", (chunk) => stdoutChunks.push(chunk));

    cmd.on("close", (code, signal) => {
      if (code === 0) {
        resolve(`success: ${packageNameWithVersion}`);
        return;
      }

      console.log({
        code,
        signal,
        stdout: Buffer.concat(stdoutChunks).toString(),
        stderr: Buffer.concat(stderrChunks).toString(),
      });

      reject(new Error(`failure: ${packageNameWithVersion}`));
    });
  });

console.log("node version:", execSync("node -v", { encoding: "utf8" }));
console.log("npm version:", execSync("npm -v", { encoding: "utf8" }));

(async () => {
  const chunkSize = 8;
  for (let i = 0; i < packages.length; i += chunkSize) {
    // Failure will be thrown in case of any rejections
    await Promise.all(
      packages.slice(i, i + chunkSize).map(callNpmViewUsingSpawn)
    );
  }
})();
